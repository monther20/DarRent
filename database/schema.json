{
  "tables": {
    "maintenance_requests": {
      "columns": {
        "id": {
          "type": "string",
          "primaryKey": true,
          "description": "Unique identifier for the maintenance request"
        },
        "renter_id": {
          "type": "string",
          "description": "ID of the renter who created the request"
        },
        "title": {
          "type": "string",
          "description": "Title of the maintenance request"
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the maintenance issue"
        },
        "status": {
          "type": "string",
          "enum": ["pending", "in_progress", "completed", "cancelled"],
          "description": "Current status of the maintenance request"
        },
        "priority": {
          "type": "string",
          "enum": ["low", "medium", "high", "emergency"],
          "description": "Priority level of the maintenance request"
        },
        "created_at": {
          "type": "timestamp",
          "description": "When the request was created"
        },
        "updated_at": {
          "type": "timestamp",
          "description": "When the request was last updated"
        },
        "completed_at": {
          "type": "timestamp",
          "nullable": true,
          "description": "When the request was completed (if applicable)"
        },
        "property_id": {
          "type": "string",
          "description": "ID of the property where maintenance is needed"
        },
        "location": {
          "type": "string",
          "description": "Specific location within the property"
        }
      },
      "indexes": [
        {
          "columns": ["renter_id"],
          "type": "btree"
        },
        {
          "columns": ["status"],
          "type": "btree"
        },
        {
          "columns": ["created_at"],
          "type": "btree"
        }
      ]
    },
    "maintenance_attachments": {
      "columns": {
        "id": {
          "type": "string",
          "primaryKey": true,
          "description": "Unique identifier for the attachment"
        },
        "request_id": {
          "type": "string",
          "description": "ID of the maintenance request this attachment belongs to"
        },
        "file_url": {
          "type": "string",
          "description": "URL to the attached file"
        },
        "file_type": {
          "type": "string",
          "description": "Type of the attached file (image, document, etc.)"
        },
        "created_at": {
          "type": "timestamp",
          "description": "When the attachment was added"
        }
      },
      "indexes": [
        {
          "columns": ["request_id"],
          "type": "btree"
        }
      ]
    },
    "maintenance_comments": {
      "columns": {
        "id": {
          "type": "string",
          "primaryKey": true,
          "description": "Unique identifier for the comment"
        },
        "request_id": {
          "type": "string",
          "description": "ID of the maintenance request this comment belongs to"
        },
        "user_id": {
          "type": "string",
          "description": "ID of the user who made the comment"
        },
        "user_type": {
          "type": "string",
          "enum": ["renter", "landlord", "maintenance_staff"],
          "description": "Type of user who made the comment"
        },
        "comment": {
          "type": "string",
          "description": "The comment text"
        },
        "created_at": {
          "type": "timestamp",
          "description": "When the comment was created"
        }
      },
      "indexes": [
        {
          "columns": ["request_id"],
          "type": "btree"
        },
        {
          "columns": ["user_id"],
          "type": "btree"
        }
      ]
    },
    "maintenance_status_history": {
      "columns": {
        "id": {
          "type": "string",
          "primaryKey": true,
          "description": "Unique identifier for the status change"
        },
        "request_id": {
          "type": "string",
          "description": "ID of the maintenance request"
        },
        "previous_status": {
          "type": "string",
          "description": "Previous status of the request"
        },
        "new_status": {
          "type": "string",
          "description": "New status of the request"
        },
        "changed_by": {
          "type": "string",
          "description": "ID of the user who changed the status"
        },
        "changed_at": {
          "type": "timestamp",
          "description": "When the status was changed"
        },
        "notes": {
          "type": "string",
          "nullable": true,
          "description": "Optional notes about the status change"
        }
      },
      "indexes": [
        {
          "columns": ["request_id"],
          "type": "btree"
        },
        {
          "columns": ["changed_at"],
          "type": "btree"
        }
      ]
    }
  },
  "relationships": [
    {
      "from": "maintenance_attachments",
      "to": "maintenance_requests",
      "type": "many-to-one",
      "on": "request_id"
    },
    {
      "from": "maintenance_comments",
      "to": "maintenance_requests",
      "type": "many-to-one",
      "on": "request_id"
    },
    {
      "from": "maintenance_status_history",
      "to": "maintenance_requests",
      "type": "many-to-one",
      "on": "request_id"
    }
  ]
}
